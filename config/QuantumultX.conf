# Quantumult X 配置文件
# 更新时间：2025.12.24

[general] # 通用设置参数

# 代理延迟测速 URL - 对指定的网址进行相应测试，以确认节点的可用性
network_check_url=http://cp.cloudflare.com/generate_204 
server_check_url=http://www.qualcomm.cn/generate_204
server_check_timeout = 3000

# 资源解析器
resource_parser_url=https://fastly.jsdelivr.net/gh/KOP-XIAO/QuantumultX@master/Scripts/resource-parser.js

# 顶部节点信息展示
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://github.com/KOP-XIAO/QuantumultX/raw/master/Scripts/IP_API.js

# 不使用fake-ip的列表
dns_exclusion_list = *.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.icitymobile.mobi, *.pingan.com.cn, *.cmbchina.com, *.localnetwork.uop, mfs.ykimg.com*.ttf

# 不经过QuantumultX处理
excluded_routes=192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8, 239.255.255.250/32

# 仅支持末端策略（末端策略为经由规则模块和策略模块后所命中的策略，例如：direct、reject 以及节点；不支持内置策略 proxy 以及其它自定义策略）
fallback_udp_policy=direct

# UDP 白名单：留空则默认所有为端口。不在udp白名单列表中的端口，将被丢弃处理（返回 ICMP “端口不可达” 信息）。
;udp_whitelist=1-442, 444-65535

# UDP Drop名单：同白名单类似，但不会返回 ICMP “端口不可达” 信息，名单仅处理 whitelist名单中的端口
# 版本1.5.2开始可以包含 STUN、QUIC 等协议来阻止相关数据包，例如 80, STUN, QUIC
udp_drop_list=443
icmp_auto_reply = true

[dns]
# 禁用系统 DNS（no-system）以及 ipv6
;no-system
no-ipv6

# dns服务器
server=223.5.5.5
server=119.29.29.29
server=8.8.8.8

# 指定dns服务器
server=/*itunes.apple.com/system
server=/dl.google.com/119.29.29.29
server=/dl.l.google.com/119.29.29.29
server=/update.googleapis.com/119.29.29.29
server=/*.dl.playstation.net/119.29.29.29
server=/amplifi.lan/system
server=/router.synology.com/system
server=/sila.razer.com/system
server=/router.asus.com/system
server=/routerlogin.net/system
server=/orbilogin.com/system
server=/www.LinksysSmartWiFi.com/system
server=/LinksysSmartWiFi.com/system
server=/myrouter.local/system
server=/www.miwifi.com/system
server=/miwifi.com/system
server=/mediarouter.home/system
server=/tplogin.cn/system
server=/tplinklogin.net/system
server=/melogin.cn/system
server=/falogin.cn/system
server=/liquidlink.cn/119.29.29.29

[policy]
# static：手动选择的节点/策略组。
# available：按顺序选择列表中第一个可用的节点。
# round-robin：按列表的顺序轮流使用其中的节点。
# url-latency-benchmark：选取延迟最优节点。
# dest-hash：随机负载均衡，但相同域名走固定节点。
# ssid：将根据所设定的网络来自动切换节点/策略组。

static=节点选择, proxy, direct, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png
static=1Password, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/PBS.png
static=AI, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png
static=Apple, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Apple.png
static=CDN, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Proxy.png
static=Emby, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Emby.png
static=Github, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/github.png
static=Google, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Google.png
static=Microsoft, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Microsoft.png
static=Netflix, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Netflix.png
static=OneDrive, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/OneDrive.png
static=Speedtest, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Speedtest.png
static=Streaming, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Streaming.png
static=TikTok, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/TikTok.png
static=Telegram, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Telegram.png
static=Twitter, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Twitter.png
static=YouTube, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/YouTube.png
static=兜底策略, direct, 节点选择, 香港节点, 台湾节点, 狮城节点, 日本节点, 美国节点, 韩国节点, 特殊节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Final.png

static=香港节点, server-tag-regex=(?=.*(港|HK|(?i)Hong))^((?!(台|日|韩|新|美)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
static=台湾节点, server-tag-regex=(?=.*(台|TW|(?i)Taiwan))^((?!(港|日|韩|新|美)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
static=狮城节点, server-tag-regex=(?=.*(新|狮|獅|SG|(?i)Singapore))^((?!(港|台|日|韩|兰|美)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
static=日本节点, server-tag-regex=(?=.*(日本|JP|(?i)Japan))^((?!(港|台|韩|新|美)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
static=美国节点, server-tag-regex=(?=.*(美|US|(?i)States|American))^((?!(港|台|日|韩|新)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
static=韩国节点, server-tag-regex=(?=.*(韩|韓|朝|KR|(?i)Korea))^((?!(港|台|日|新|美)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
static=特殊节点, server-tag-regex=^(?!.*(港|台|日本|韩|坡|美|HK|US|TW|JP|KR|SG|Hong|Tai|Japan|Korea|Singapore|States)), img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png

# 远程订阅部分
[server_remote]

# 远程订阅规则
[filter_remote]

# >> Domainset、Non_ip规则组

# > AD-Block
https://ruleset.skk.moe/Clash/non_ip/reject-no-drop.txt, tag = reject-no-drop, force-policy = reject, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/reject-drop.txt, tag = reject-drop, force-policy = reject, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/reject.txt, tag = reject_non_ip, force-policy = reject, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/domainset/reject.txt, tag = reject_domainset, force-policy = reject, update-interval = 86400, opt-parser = true, enabled = true
https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-QuantumultX.list, tag = AWAvenue-Ads, force-policy = reject, update-interval = 86400, opt-parser = false, enabled = true

# > 1Password
https://kelee.one/Tool/QuantumultX/Rule/1PasswordUS.snippet, tag = 1Password, force-policy = 1Password, update-interval = 86400, opt-parser = false, enabled = true

# > AI
;https://kelee.one/Tool/QuantumultX/Rule/OpenAI.snippet, tag = AI, force-policy = AI, update-interval = 86400, opt-parser = false, enabled = true
https://ruleset.skk.moe/Clash/non_ip/ai.txt, tag = AI_non_ip, force-policy = AI, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/apple_intelligence.txt, tag = AppleAI_non_ip, force-policy = AI, update-interval = 86400, opt-parser = true, enabled = true

# > Apple
https://kelee.one/Tool/QuantumultX/Rule/ApplePushNotificationService.snippet, tag = Apple Push Notification Service, force-policy = Apple, update-interval = 86400, opt-parser = false, enabled = true
https://kelee.one/Tool/QuantumultX/Rule/AppleID.snippet, tag = Apple ID, force-policy = Apple, update-interval = 86400, opt-parser = false, enabled = true
https://kelee.one/Tool/QuantumultX/Rule/AppStore.snippet, tag = App Store, force-policy = Apple, update-interval = 86400, opt-parser = false, enabled = true
;https://ruleset.skk.moe/Clash/non_ip/apple_services.txt, tag = Apple_services, force-policy = Apple, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt, tag = Apple_cdn, force-policy = direct, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt, tag = Apple_cn, force-policy = direct, update-interval = 86400, opt-parser = true, enabled = true

# > 静态CDN域名
https://ruleset.skk.moe/Clash/domainset/cdn.txt, tag = cdn_domainset, force-policy = CDN, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/cdn.txt, tag = cdn_non_ip, force-policy = CDN, update-interval = 86400, opt-parser = true, enabled = true

# > Emby
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Emby/Emby.list, tag=Emby, force-policy=Emby, update-interval=86400, opt-parser=false, enabled=true

# > GitHub
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/GitHub/GitHub.list, tag=GitHub, force-policy=GitHub, update-interval=86400, opt-parser=false, enabled=true

# > Google
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Google/Google.list, tag=Google, force-policy=Google, update-interval=86400, opt-parser=false, enabled=true

# > Microsoft
https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt, tag=Microsoft_cdn, force-policy=direct, update-interval=86400, opt-parser=true, enabled=true
https://ruleset.skk.moe/Clash/non_ip/microsoft.txt, tag=Microsoft_non_ip, force-policy=Microsoft, update-interval=86400, opt-parser=true, enabled=true

# > Netflix
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Netflix/Netflix.list, tag=Netflix, force-policy=Netflix, update-interval=86400, opt-parser=false, enabled=true

# > OneDrive
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/OneDrive/OneDrive.list, tag=OneDrive, force-policy=OneDrive, update-interval=86400, opt-parser=false, enabled=true

# > Speedtest
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Speedtest/Speedtest.list, tag=Speedtest, force-policy=Speedtest, update-interval=86400, opt-parser=false, enabled=true

# > TikTok
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/TikTok/TikTok.list, tag=TikTok, force-policy=TikTok, update-interval=86400, opt-parser=false, enabled=true

# > Telegram
;https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Telegram/Telegram.list, tag=Telegram, force-policy=Telegram, update-interval=86400, opt-parser=false, enabled=true
https://ruleset.skk.moe/Clash/non_ip/telegram.txt, tag = Telegram_non_ip, force-policy = Telegram, update-interval = 86400, opt-parser = true, enabled = true

# > Twitter
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Twitter/Twitter.list, tag=Twitter, force-policy=Twitter, update-interval=86400, opt-parser=false, enabled=true

# > YouTube
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX//YouTube/YouTube.list, tag=YouTube, force-policy=YouTube, update-interval=86400, opt-parser=false, enabled=true

# > 流媒体
https://ruleset.skk.moe/Clash/non_ip/stream_hk.txt, tag = stream_hk_non_ip, force-policy = 香港节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/stream_tw.txt, tag = stream_tw_non_ip, force-policy = 台湾节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/stream_jp.txt, tag = stream_jp_non_ip, force-policy = 日本节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/stream_us.txt, tag = stream_us_non_ip, force-policy = 美国节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/stream_kr.txt, tag = stream_kr_non_ip, force-policy = 韩国节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/stream.txt, tag = stream_non_ip, force-policy = Streaming, update-interval = 86400, opt-parser = true, enabled = true
;https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/GlobalMedia/GlobalMedia.list, tag=GlobalMedia, force-policy=Streaming, update-interval=86400, opt-parser=false, enabled=true

# > 直连
https://ruleset.skk.moe/Clash/non_ip/lan.txt, tag = LAN_non_ip, force-policy = direct, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/domestic.txt, tag = Domestic_non_ip, force-policy = Telegram, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/direct.txt, tag = Direct_non_ip, force-policy = direct, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/non_ip/lan.txt, tag = LAN_non_ip, force-policy = direct, update-interval = 86400, opt-parser = true, enabled = true

# > Newbielxt
https://github.boki.moe/https://raw.githubusercontent.com/lxt20180608/Newbielxt/main/Ruleset/SpecialDomain.list, tag = SpecialDomain, force-policy = direct, update-interval = 86400, opt-parser = false, enabled = true
https://github.boki.moe/https://raw.githubusercontent.com/lxt20180608/Newbielxt/main/Ruleset/PrivateTracker.list, tag = PrivateTracker, force-policy = direct, update-interval = 86400, opt-parser = false, enabled = true


# >> IP规则组

# > AD-Block
https://ruleset.skk.moe/Clash/ip/reject.txt, tag = reject, force-policy = reject, update-interval = 86400, opt-parser = true, enabled = true

# > 流媒体
https://ruleset.skk.moe/Clash/ip/stream_hk.txt, tag = stream_hk_ip, force-policy = 香港节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/ip/stream_tw.txt, tag = stream_tw_ip, force-policy = 台湾节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/ip/stream_jp.txt, tag = stream_jp_ip, force-policy = 日本节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/ip/stream_us.txt, tag = stream_us_ip, force-policy = 美国节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/ip/stream_kr.txt, tag = stream_kr_ip, force-policy = 韩国节点, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/ip/stream.txt, tag = stream_ip, force-policy = Streaming, update-interval = 86400, opt-parser = true, enabled = true

# > Telegram
https://ruleset.skk.moe/Clash/ip/telegram.txt, tag = telegram_ip, force-policy = Telegram, update-interval = 86400, opt-parser = true, enabled = true

# > 直连
https://ruleset.skk.moe/Clash/ip/lan.txt, tag = lan_ip, force-policy = direct, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/ip/domestic.txt, tag = Domestic_ip, force-policy = direct, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/ip/china_ip.txt, tag = china_ip, force-policy = direct, update-interval = 86400, opt-parser = true, enabled = true
https://ruleset.skk.moe/Clash/ip/china_ip_ipv6.txt, tag = china_ip_ipv6, force-policy = direct, update-interval = 86400, opt-parser = true, enabled = true

FILTER_LAN, tag = LAN, force-policy = direct, enabled = true
FILTER_REGION, tag = CN REGION, force-policy = direct, enabled = true


[rewrite_remote]
https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/config/QX.snippet, tag=Sub Store, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=BoxJs, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/TestFlightDownload.conf , tag=TestFlight区域限制解除, update-interval=172800, opt-parser=true, enabled=true

https://raw.githubusercontent.com/PoetryU/Scientist/master/QuantumultX/rewrite/gh429.snippet, tag=Github429, update-interval=172800, opt-parser=true, enabled=true

https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/StartUp.conf, tag=墨鱼去开屏, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Module/Block/Advertising.sgmodule, tag=神机去广告, update-interval=172800, opt-parser=true, enabled=true

[server_local]

# 本地分流规则
[filter_local]
host-suffix, local, direct
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 224.0.0.0/24, direct
ip-cidr, 100.64.0.0/10, direct
ip6-cidr, fe80::/10, direct
# 已经引用远程文件
geoip, cn, direct
# 不在上述规则中(远程以及本地)的剩余请求，将走final 指定的节点/策略
final, 兜底策略

[rewrite_local]
^https?:\/\/(www.)?(g|google)\.cn url 302 https://www.google.com

[task_local]
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=流媒体解锁查询, img-url=arrowtriangle.right.square.system, enabled=true

[http_backend]

[mitm]
skip_validating_cert = true
hostname = www.google.cn
